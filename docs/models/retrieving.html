<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
        <title>Retrieving and Saving data</title>
        <meta name="description" content=""/>
        <meta name="robots" content="index, follow"/>
        <meta property="og:title" content="Retrieving and Saving data"/>
        <meta property="og:image" content="http://alterframework.com/assets/images/logo.png"/>
        <meta property="og:site_name" content="Retrieving and Saving data"/>
        <meta property="og:url" content="http://alterframework.com"/>
        <meta property="og:description" content="A Microframework for WordPress Applications"/>
        <meta property="og:type" content="website"/>
        <!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
        <link rel="stylesheet" href="http://alterframework.com/assets/css/all.css"/>
        <link rel="stylesheet" href="http://alterframework.com/assets/css/custom.css"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"/>
        <script src="//use.typekit.net/yjz4fyo.js"></script>
        <script>try{Typekit.load();}catch(e){}</script>
    </head>
    <body style="padding-top: 5em">

        <div class="wrapper" style="width: 100%">
      <div class="container">
    
        <header class="site-header">
          <div class="site-title"><a href="http://alterframework.com">Alter</a></div>
          <div class="site-slogan">A Microframework for WordPress Applications</div>
        </header>

    
        <div class="row">
            <div class="col-md-3">

                                          <h3>Getting Started</h3>
              <ul>
                                    <li><a href="http://alterframework.com/docs/index.html">Installation</a></li>
                                    <li><a href="http://alterframework.com/docs/config.html">Configuration</a></li>
                                </ul>
                            <h3>The Basics</h3>
              <ul>
                                    <li><a href="http://alterframework.com/docs/basics/routes.html">Routes</a></li>
                                    <li><a href="http://alterframework.com/docs/basics/views.html">Views and Layouts</a></li>
                                    <li><a href="http://alterframework.com/docs/basics/wordpress.html">WordPress Templates</a></li>
                                    <li><a href="http://alterframework.com/docs/basics/helpers.html">View Helpers</a></li>
                                </ul>
                            <h3>HTTP</h3>
              <ul>
                                    <li><a href="http://alterframework.com/docs/http/request.html">Requests</a></li>
                                    <li><a href="http://alterframework.com/docs/http/response.html">Responses</a></li>
                                </ul>
                            <h3>Models</h3>
              <ul>
                                    <li><a href="http://alterframework.com/docs/models/creating.html">Creating Models</a></li>
                                    <li><a href="http://alterframework.com/docs/models/fields.html">Setting model fields</a></li>
                                    <li><a href="http://alterframework.com/docs/models/relations.html">Relationships</a></li>
                                    <li><a href="http://alterframework.com/docs/models/retrieving.html">Retrieving and Saving</a></li>
                                    <li><a href="http://alterframework.com/docs/models/taxonomies.html">Taxonomies</a></li>
                                    <li><a href="http://alterframework.com/docs/models/seeding.html">Seeds</a></li>
                                    <li><a href="http://alterframework.com/docs/models/dashboard.html">Dashboard customization</a></li>
                                </ul>
              
              
            </div>
    
          <div class="col-md-9" style="padding-left: 2em">
        <h1>Retrieving and Saving data</h1>
        <h1 id="retrieving">Retrieving</h1>
<p>Alter offers a simple and powerful API to retrieve data. Let's supose that you have this <code>Car</code> model:</p>
<pre><code class="language-php">use Hero\Core\Model;
class Car extends Model {

  public $fields = [

    'title' =&gt; true
    'thumbnail' =&gt; true,

    'gallery' =&gt; [
      'type' =&gt; 'image',
      'label' =&gt; 'Gallery',
      'multiple' =&gt; true
    ],

    'year' =&gt; [
      'type' =&gt; 'int',
      'label' =&gt; 'Year'
    ]

  ];

}</code></pre>
<p>You can just call:</p>
<pre><code class="language-php">$cars = Car::all(); // Array of Cars</code></pre>
<p>And access the model fields:</p>
<pre><code class="language-php">foreach(Car:all() as $car){

  echo $car-&gt;title;
  echo $car-&gt;year;

  foreach($car-&gt;gallery as $photo){
    echo $photo-&gt;thumbnail;
  }

}</code></pre>
<h2 id="model-methods">Model methods</h2>
<h3 id="all">all()</h3>
<p>Retrieves an array with all items</p>
<h3 id="findoptions">find($options)</h3>
<ul>
<li>$options: Array of <a href="https://codex.wordpress.org/Class_Reference/WP_Query">WP_Query</a> arguments</li>
</ul>
<p>Retrieves an array of items</p>
<h3 id="findbyslugslug">findBySlug($slug)</h3>
<ul>
<li>$slug: String</li>
</ul>
<p>Retrives an item matching the slug passed as argument</p>
<h3 id="findbytaxonomytaxonomy-term-limit">findByTaxonomy($taxonomy, $term, $limit)</h3>
<ul>
<li>$taxonomy: String</li>
<li>$term: String</li>
<li>$limit: Integer (optional)</li>
</ul>
<p>Retrieves an array of items matching the passed taxonomy and term</p>
<h3 id="paginatelimit-offset">paginate($limit, $offset)</h3>
<ul>
<li>$limit: Integer (optional)</li>
<li>$offset: Integer (optional)</li>
</ul>
<p>Returns an paginated array of items</p>
<pre><code class="language-php">$cars = Car::paginate();</code></pre>
<h3 id="paginatewithoptionsoptions-limit-offset">paginateWithOptions($options, $limit, $offset)</h3>
<ul>
<li>$options: Array of <a href="https://codex.wordpress.org/Class_Reference/WP_Query">WP_Query</a> arguments</li>
<li>$limit: Integer (optional)</li>
<li>$offset: Integer (optional)</li>
</ul>
<p>Returns an paginated array of items</p>
<h3 id="queryfields-options">query($fields, $options)</h3>
<ul>
<li>$fields: String|Array</li>
<li>$options: Array of <a href="https://codex.wordpress.org/Class_Reference/WP_Query">WP_Query</a> arguments</li>
</ul>
<p>Queries in same way as the <code>find()</code> method but specifying which fields should be returned in the <em>Model</em> object.</p>
<p>The <code>$fields</code> parameter should be an array of fields, which some of them could be grouped by an alias:</p>
<ul>
<li><code>post</code> for the default Wordpress object (title, guid, etc)</li>
<li><code>author</code>: Returns all the Author object</li>
<li><code>taxonomies</code>: Returns all the taxonomies</li>
<li><code>relations</code>: Returns all the relations (belongs_to and has_many)</li>
<li><code>children</code>: Returns all the children pages (in case of the Page post type)</li>
</ul>
<h2 id="automagic-find-methods">Automagic find() methods</h2>
<p>Alter allows you to use automagic <em>find()</em> methods according to you custom fields.</p>
<pre><code class="language-php">$cars = Car::findByYear(2015);</code></pre>
<p>This method will search all the cars that have the custom fields <code>year</code> with the <em>2015</em> value.</p>
<h1 id="saving">Saving</h1>
<p>With Alter you can also save data.</p>
<p>Just intantiate your model:</p>
<pre><code class="language-php">$car = new Car();</code></pre>
<p>Add some data:</p>
<pre><code class="language-php">$car-&gt;color = "blue";
$car-&gt;title = "Cobra";</code></pre>
<p>And save!</p>
<pre><code class="language-php">$car-&gt;save();</code></pre>
<p>With the object saved, you can now access the ID:</p>
<pre><code class="language-php">echo $car-&gt;id;</code></pre>
      </div>
      </div>

    <footer class="site-footer">
        <p>Developed by <a href="http://vilar.cc">Sergio Vilar</a> and <a href="https://github.com/alterfw/alter/graphs/contributors" target="_blank">contributors</a>.</p>
    </footer>

    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script src="http://alterframework.com/assets/scripts/build/production.js"></script>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
<a target="_blank" href="https://github.com/alterfw/alter"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>
</body>
</html>
